<!-- dashboard-doctor.html -->
<div class="doctor-dashboard-container">
  <app-shared-header [userType]="'doctor'" [userName]="doctorName"></app-shared-header>

  <main class="dashboard-main">
    <!-- Welcome Section -->
    <div class="welcome-section">
      <h1 class="welcome-title">Welcome, {{ doctorName }}</h1>
      <p class="welcome-subtitle">Here's your dashboard overview</p>
    </div>

    <!-- Loading State -->
    <div class="loading-container" *ngIf="loading">
      <div class="spinner"></div>
      <p>Loading your dashboard...</p>
    </div>

    <!-- Dashboard Content -->
    <div *ngIf="!loading">
      <!-- Stats Grid -->
      <section class="stats-grid">
        <div class="stat-card" *ngFor="let stat of stats">
          <div class="stat-header">
            <span class="stat-label">{{ stat.label }}</span>
            <div class="stat-icon-wrapper" [style.background-color]="stat.color + '15'">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" [attr.stroke]="stat.color" stroke-width="2">
                <ng-container [ngSwitch]="stat.iconType">
                  <!-- Patients Icon -->
                  <g *ngSwitchCase="'patients'">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                  </g>
                  <!-- Appointments Icon -->
                  <g *ngSwitchCase="'appointments'">
                    <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                    <line x1="16" x2="16" y1="2" y2="6"/>
                    <line x1="8" x2="8" y1="2" y2="6"/>
                    <line x1="3" x2="21" y1="10" y2="10"/>
                  </g>
                  <!-- Reviews Icon -->
                  <g *ngSwitchCase="'reviews'">
                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                  </g>
                  <!-- Messages Icon -->
                  <g *ngSwitchCase="'consults'">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                  </g>
                </ng-container>
              </svg>
            </div>
          </div>
          <div class="stat-value">{{ stat.value }}</div>
          <div class="stat-subtitle">{{ stat.subtitle }}</div>
        </div>
      </section>

      <!-- Quick Actions -->
      <section class="quick-actions-card">
        <h3 class="quick-actions-title">Quick Actions</h3>
        <div class="quick-actions-grid">
          <button class="quick-action-btn" routerLink="/doctor-patients">
            <div class="action-icon-circle patients">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
            </div>
            <span class="action-label">View Patients</span>
            <span class="action-count" *ngIf="stats[0].value > 0">{{ stats[0].value }}</span>
          </button>

          <button class="quick-action-btn" routerLink="/doctor-schedule">
            <div class="action-icon-circle schedule">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2">
                <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
                <line x1="16" x2="16" y1="2" y2="6"/>
                <line x1="8" x2="8" y1="2" y2="6"/>
                <line x1="3" x2="21" y1="10" y2="10"/>
              </svg>
            </div>
            <span class="action-label">Schedule</span>
            <span class="action-count" *ngIf="stats[1].value > 0">{{ stats[1].value }} today</span>
          </button>

          <button class="quick-action-btn" routerLink="/doctor-messages">
            <div class="action-icon-circle messages">
              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
            </div>
            <span class="action-label">Messages</span>
            <span class="action-count unread" *ngIf="stats[3].value > 0">{{ stats[3].value }}</span>
          </button>
        </div>
      </section>

      <!-- Recent Activity Section (Optional Enhancement) -->
      <section class="recent-activity" *ngIf="stats[2].value > 0">
        <div class="activity-header">
          <h3 class="activity-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FF6B6B" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" x2="12" y1="8" y2="12"/>
              <line x1="12" x2="12.01" y1="16" y2="16"/>
            </svg>
            Action Required
          </h3>
        </div>
        <div class="activity-card">
          <div class="activity-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#FF6B6B" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
          </div>
          <div class="activity-content">
            <h4 class="activity-title-text">Pending Appointment Requests</h4>
            <p class="activity-description">You have {{ stats[2].value }} appointment request{{ stats[2].value !== 1 ? 's' : '' }} waiting for your confirmation</p>
          </div>
          <button class="btn-view-activity" routerLink="/doctor-schedule">
            Review Now
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"/>
            </svg>
          </button>
        </div>
      </section>
    </div>
  </main>

  <app-onboarding></app-onboarding>
</div>

